!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).VueAccessibleMultiselect={})}(this,(function(e){"use strict";var t={transition:null},n=[37,38,39,40];function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(e,t,n,i,s,l,o,a,r,c){"boolean"!=typeof o&&(r=a,a=o,o=!1);var u,d="function"==typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,s&&(d.functional=!0)),i&&(d._scopeId=i),l?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(l)},d._ssrRegister=u):t&&(u=o?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(d.functional){var p=d.render;d.render=function(e,t){return u.call(t),p(e,t)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,u):[u]}return n};const l={name:"VueAccessibleMultiselect",props:{options:{type:Array,required:!0,validator:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++){var n=e[t];if("object"===i(n)&&null!==n){if("value"in n&&"label"in n)continue;return!1}return!1}return!0}return!1}},value:{required:!0},transition:{type:Object,default:function(){return t.transition||null},validator:function(e){return null===e||"object"===i(e)&&"name"in e}},label:String,placeholder:String,disabled:Boolean,multiple:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!1}},data:function(){return{open:!1,timeout:null,printedText:"",localId_:this._uid,activeDescendantIndex:-1}},computed:{className:function(){return{"v-multiselect--opened":this.open}},labelId:function(){return this.label||this.hasSlot("label")?"v-multiselect-label-".concat(this.localId_):null},buttonId:function(){return"v-multiselect-button-".concat(this.localId_)},ariaExpanded:function(){return!!this.open&&"true"},btnClass:function(){return{"v-multiselect__btn--disabled":this.disabled}},isPlaceholderVisible:function(){return(this.placeholder||this.hasSlot("placeholder"))&&(!this.value||Array.isArray(this.value)&&0===this.value.length)},isSelectedTextVisible:function(){return this.multiple?Array.isArray(this.value)&&0!==this.value.length:null!=this.value},selectedText:function(){var e=this;if(!this.multiple){var t=this.options.find((function(t){return t.value===e.value}));return t&&t.label?t.label:""}if(Array.isArray(this.value))return this.value.map((function(t){var n=e.options.find((function(e){return e.value===t}));return n&&n.label?n.label:""})).join(", ")}},watch:{open:function(e){var t=this;e?this.$nextTick((function(){if(document.addEventListener("click",t.clickListener),t.$refs.list.focus(),t.value.length){if(t.$refs.options){var e=t.$refs.options.findIndex((function(e){return e.classList.contains("v-multiselect__option--selected")}));t.activeDescendantIndex=e}}else t.activeDescendantIndex=0;t.$emit("open")})):(document.removeEventListener("click",this.clickListener),this.$emit("close"))},activeDescendantIndex:function(){this.scrollToActiveDescendant()}},mounted:function(){var e=this;this.$nextTick((function(){e.localId_=e._uid}))},methods:{toggle:function(){this.open=!this.open},clickListener:function(e){var t=e.target,n=this.$refs,i=n.list,s=n.button;i&&i.contains(t)||s.contains(t)||(this.open=!1)},isSelected:function(e){return this.multiple?!!Array.isArray(this.value)&&this.value.includes(e.value):this.value===e.value},input:function(e){var t=this.value,n=e.value;this.multiple?(Array.isArray(t)||(t=[]),t.includes(n)?t.splice(t.indexOf(n),1):t.push(n)):t=n,this.$emit("input",t),this.closeOnSelect&&(this.open=!1)},directionHandler:function(e,t){var n=this.activeDescendantIndex;switch(t){case"up":0!==this.activeDescendantIndex&&this.activeDescendantIndex--;break;case"down":this.activeDescendantIndex!==this.options.length-1&&this.activeDescendantIndex++}e.shiftKey&&n!==this.activeDescendantIndex&&this.input(this.options[this.activeDescendantIndex])},getOptionId:function(e){return"v-multiselect-option-".concat(this.options.indexOf(e),"_").concat(this.localId_)},getOptionClass:function(e){return"v-multiselect-option-value-".concat(e.value.replace(/\s+/g,"-"))},escapeHandler:function(){this.open=!1,this.$refs.button.focus()},printHandler:function(e){var t=this,n=e.keyCode||e._keyCode;this.printedText+=String.fromCharCode(n),this.selectByText(this.printedText),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.printedText=""}),500)},selectByText:function(e){var t=!0,n=!1,i=void 0;try{for(var s,l=this.options.keys()[Symbol.iterator]();!(t=(s=l.next()).done);t=!0){var o=s.value;if(this.options[o].label.toUpperCase().startsWith(e))return void(this.activeDescendantIndex=o)}}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}},keyDownHandler:function(e){var t=e.keyCode||e._keyCode;-1!==n.indexOf(t)&&e.preventDefault()},scrollToActiveDescendant:function(){var e=this.$refs.options;if(e){var t=e[this.activeDescendantIndex];if(t){var n=t.offsetTop,i=t.clientHeight,s=this.$refs.list,l=s.scrollTop+s.clientHeight;n<s.scrollTop?s.scrollTop=n:n+i>l&&(s.scrollTop=n-s.clientHeight+i)}}},spaceHandler:function(e){var t,n,i,s=this;if(this.multiple&&e.shiftKey){var l=this.getLastSelectedOptionIndex();if(-1!==l){var o=(t=this.options,n=l,(i=this.activeDescendantIndex)<n&&(i=[n,n=i][0]),t.slice(n,i+1));1!==o.length&&(l>this.activeDescendantIndex?o.pop():o.shift()),o=o.map((function(e){return e.value})).filter((function(e){return!s.value.includes(e)})),this.$emit("input",this.value.concat(o))}else this.input(this.options[this.activeDescendantIndex])}else this.input(this.options[this.activeDescendantIndex])},selectAllToEdge:function(e){var t=this.value.splice(0),n=this.options;switch(e){case"start":for(var i=this.activeDescendantIndex;i>=0;i--){var s=n[i].value;t.includes(s)||t.push(this.options[i].value)}this.activeDescendantIndex=0;break;case"end":for(var l=this.activeDescendantIndex;l<=n.length-1;l++){var o=n[l].value;t.includes(o)||t.push(this.options[l].value)}this.activeDescendantIndex=this.options.length-1}this.$emit("input",t)},toggleAll:function(){this.isAllSelected()?this.unselectAll():this.selectAll()},isAllSelected:function(){return this.value.length===this.options.length},selectAll:function(){var e=this.options.map((function(e){return e.value}));this.$emit("input",e)},unselectAll:function(){this.$emit("input",[])},getLastSelectedOption:function(){if(0!==this.value.length){var e=this.value[this.value.length-1];return this.options.find((function(t){return t.value===e}))}},getLastSelectedOptionIndex:function(){return this.options.indexOf(this.getLastSelectedOption())},homeAndEndHandler:function(e){if(!e.shiftKey)switch(e.keyCode){case 35:this.activeDescendantIndex=this.options.length-1;break;case 36:this.activeDescendantIndex=0}},blurHandler:function(e){e.relatedTarget!==this.$refs.button&&(this.open=!1)},hasSlot:function(e){return Boolean(this.$slots[e])||Boolean(this.$scopedSlots[e])},keyUpHandler:function(e){if(this.multiple){var t=e.keyCode||e._keyCode;if(e.ctrlKey&&65===t)return void this.toggleAll();if(e.ctrlKey&&e.shiftKey){if(35===t)return void this.selectAllToEdge("end");if(36===t)return void this.selectAllToEdge("start")}}this.printHandler(e)}}};var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-multiselect",class:e.className},[e.hasSlot("label")||e.label?n("span",{staticClass:"v-multiselect__label",attrs:{id:e.labelId}},[e._t("label",[e._v(e._s(e.label)+":")])],2):e._e(),n("div",{staticClass:"v-multiselect__inner"},[n("button",{ref:"button",staticClass:"v-multiselect__btn",class:e.btnClass,attrs:{id:e.buttonId,disabled:e.disabled,"aria-expanded":e.ariaExpanded,"aria-labelledby":(e.labelId?e.labelId:"")+" "+e.buttonId,type:"button","aria-haspopup":"listbox"},on:{click:e.toggle}},[e.hasSlot("prepend")?n("span",{staticClass:"v-multiselect__prepend"},[e._t("prepend")],2):e._e(),e.isPlaceholderVisible?n("span",{staticClass:"v-multiselect__placeholder"},[e._t("placeholder",[e._v(e._s(e.placeholder))],{placeholder:e.placeholder})],2):e._e(),e.isSelectedTextVisible?n("span",{staticClass:"v-multiselect__selected"},[e._t("selected",[e._v(e._s(e.selectedText))],{value:e.value,options:e.options})],2):e._e(),n("span",{staticClass:"v-multiselect__arrow"},[e._t("arrow",[n("svg",{attrs:{viewBox:"0 0 255 255"}},[n("path",{attrs:{d:"M0 64l128 127L255 64z"}})])])],2)]),n("transition",{attrs:{name:e.transition?e.transition.name:"",mode:e.transition?e.transition.mode:""}},[e.open?n("div",{staticClass:"v-multiselect__menu"},[Array.isArray(e.options)&&e.options.length?n("ul",{ref:"list",staticClass:"v-multiselect__list",staticStyle:{position:"relative"},attrs:{"aria-multiselectable":"true","aria-activedescendant":e.getOptionId(e.options[e.activeDescendantIndex]),"aria-labelledby":e.labelId,role:"listbox",tabindex:"-1"},on:{keydown:[e.keyDownHandler,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:t.preventDefault()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.stopPropagation(),e.escapeHandler(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.spaceHandler(t)}],keyup:[e.keyUpHandler,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.directionHandler(t,"up")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.directionHandler(t,"down")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.spaceHandler(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"home",void 0,t.key,void 0)?null:e.homeAndEndHandler(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"end",void 0,t.key,void 0)?null:e.homeAndEndHandler(t)}],blur:e.blurHandler}},e._l(e.options,(function(t,i){return n("li",{key:i,ref:"options",refInFor:!0,staticClass:"v-multiselect__option",class:[e.getOptionClass(t),{"v-multiselect__option--selected":e.isSelected(t),"v-multiselect__option--focus":i===e.activeDescendantIndex}],attrs:{id:e.getOptionId(t),role:"option","aria-selected":e.isSelected(t)?"true":"false"},on:{click:function(n){return e.input(t)}}},[e._t("option",[e._v(e._s(t.label))],{option:t,value:e.value})],2)})),0):n("div",{staticClass:"v-multiselect__no-options"},[e._t("no-options",[n("span",[e._v("No options provided")])])],2)]):e._e()])],1)])};o._withStripped=!0;var a=s({render:o,staticRenderFns:[]},void 0,l,void 0,!1,void 0,void 0,void 0),r={install:function(e){this.installed||(this.installed=!0,e.component("VueAccessibleMultiselect",a))}};e.VueAccessibleMultiselect=a,e.config=t,e.default=r,Object.defineProperty(e,"__esModule",{value:!0})}));
